<app-login-layout
    [title]="'Recuperar Senha'"
    [primaryBtnText]="buttonText"
    (submit)="submit()"
    [disablePrimaryBtn]="!forgotPasswordForm.valid || loading"
>
    <img 
        src="/logoNaue.png" 
        alt="Naue Consultoria" 
        class="login-logo"
    />
    
    <!-- Formulário de recuperação -->
    <form [formGroup]="forgotPasswordForm" *ngIf="!emailSent">
        <div class="info-text">
            <i class="fas fa-info-circle"></i>
            <p>Digite seu email cadastrado e enviaremos um código para recuperar sua senha.</p>
        </div>
        
        <app-login-primary-input
            formControlName="email"
            inputName="email"
            type="email"
            label="Email"
            placeholder="Digite seu email cadastrado"
            (keypress)="onKeyPress($event)"
        >
            <svg width="18" height="18" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M3 5C3 4.44772 3.44772 4 4 4H16C16.5523 4 17 4.44772 17 5V15C17 15.5523 16.5523 16 16 16H4C3.44772 16 3 15.5523 3 15V5Z" stroke="#9ca3af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M3 5L10 10L17 5" stroke="#9ca3af" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
        </app-login-primary-input>
        
        <a class="back-to-login" routerLink="/login">
            <i class="fas fa-arrow-left"></i> Voltar para o login
        </a>
    </form>
    
    <!-- Confirmação de envio -->
    <div class="success-message" *ngIf="emailSent">
        <div class="success-icon">
            <i class="fas fa-check-circle"></i>
        </div>
        <h3>Email enviado!</h3>
        <p>Um código de recuperação foi enviado para:</p>
        <p class="email-sent">{{ sentToEmail }}</p>
        <p class="info">O código é válido por 15 minutos.</p>
        
        <button 
            class="btn-secondary" 
            (click)="goToResetPassword()"
        >
            Inserir código
        </button>
        
        <button 
            class="btn-text" 
            (click)="resendCode()"
            [disabled]="resendLoading"
        >
            <span *ngIf="!resendLoading">Reenviar código</span>
            <span *ngIf="resendLoading">
                <i class="fas fa-spinner fa-spin"></i> Reenviando...
            </span>
        </button>
    </div>
    
    <!-- Mensagem de erro -->
    <div class="error-message" *ngIf="error">
        <i class="fas fa-exclamation-circle"></i>
        {{ error }}
    </div>
</app-login-layout>