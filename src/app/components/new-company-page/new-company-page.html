<div class="page">
  <div class="page-header">
    <h1 class="page-title">{{ getPageTitle() }}</h1>
    <div class="breadcrumb">
      <span>Home</span>
      <span class="breadcrumb-separator">/</span>
      <span>Empresas</span>
      <span class="breadcrumb-separator">/</span>
      <span>{{ isEditMode ? 'Editar' : 'Nova' }}</span>
    </div>
  </div>

  <div class="table-container">
    <!-- Mensagem de erro geral -->
    <div *ngIf="errors['general']" class="error-message">
      <i class="fas fa-exclamation-circle"></i>
      {{ errors['general'] }}
    </div>

    <form class="company-form">
      <!-- Informações Básicas -->
      <div class="form-section">
        <h3 class="section-title">
          <i class="fas fa-info-circle"></i>
          Informações Básicas
        </h3>
        
        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">
              Nome da Empresa <span class="required">*</span>
            </label>
            <input 
              type="text" 
              name="companyName"
              class="form-control" 
              [class.error]="errors['name']"
              placeholder="Digite o nome da empresa"
              [(ngModel)]="companyData.name"
              [disabled]="isSaving">
            <span *ngIf="errors['name']" class="field-error">{{ errors['name'] }}</span>
          </div>

          <div class="form-group">
            <label class="form-label">Setor de Mercado</label>
            <select 
              name="marketSector"
              class="form-control" 
              [(ngModel)]="companyData.market"
              [disabled]="isSaving">
              <option value="">Selecione um setor</option>
              <option *ngFor="let sector of marketSectors" [value]="sector">{{ sector }}</option>
            </select>
          </div>
        </div>

        <div class="form-grid">
          <div class="form-group">
            <label class="form-label">Número de Funcionários</label>
            <input 
              type="number" 
              name="employeeCount"
              class="form-control" 
              [class.error]="errors['employees']"
              placeholder="0"
              [(ngModel)]="companyData.employees"
              [disabled]="isSaving">
            <span *ngIf="errors['employees']" class="field-error">{{ errors['employees'] }}</span>
          </div>

          <div class="form-group">
            <label class="form-label">Data de Fundação</label>
            <input 
              type="date" 
              name="foundationDate"
              class="form-control"
              [(ngModel)]="companyData.foundationDate"
              [disabled]="isSaving">
          </div>
        </div>
      </div>

      <!-- Localização -->
      <div class="form-section">
        <h3 class="section-title">
          <i class="fas fa-map-marker-alt"></i>
          Localização
        </h3>
        
        <div class="form-group">
          <label class="form-label">Localidade da Sede</label>
          <input 
            type="text" 
            name="headquarters"
            class="form-control" 
            placeholder="Ex: São Paulo, SP"
            [(ngModel)]="companyData.headquarters"
            [disabled]="isSaving">
        </div>

        <div class="form-group">
          <label class="form-label">Localidades Presentes</label>
          <textarea 
            name="locations"
            class="form-control" 
            rows="3" 
            placeholder="Liste as localidades onde a empresa está presente (separadas por vírgula)"
            [(ngModel)]="companyData.locations"
            [disabled]="isSaving"></textarea>
          <small class="form-hint">Ex: São Paulo, Rio de Janeiro, Belo Horizonte</small>
        </div>
      </div>

      <!-- Ações -->
      <div class="form-actions">
        <button 
          type="button" 
          class="btn btn-secondary" 
          (click)="onCancel()"
          [disabled]="isSaving">
          <i class="fas fa-times"></i>
          Cancelar
        </button>
        <button 
          type="button" 
          class="btn btn-primary" 
          (click)="onSave()"
          [disabled]="isSaving">
          <i class="fas" [ngClass]="isSaving ? 'fa-spinner fa-spin' : 'fa-save'"></i>
          {{ getButtonText() }}
        </button>
      </div>
    </form>
  </div>
</div>