<div class="modal" [class.active]="isOpen" (click)="onBackdropClick($event)">
  <div class="modal-content">
    <div class="modal-header">
      <h2 class="modal-title">{{ getModalTitle() }}</h2>
      <button class="close-btn" (click)="closeModal()">
        <i class="fas fa-times"></i>
      </button>
    </div>
    
    <!-- Mensagem de erro geral -->
    <div *ngIf="errors['general']" class="error-message">
      <i class="fas fa-exclamation-circle"></i>
      {{ errors['general'] }}
    </div>
    
    <div class="form-group">
      <label class="form-label">
        Nome da Empresa <span class="required">*</span>
      </label>
      <input 
        type="text" 
        class="form-control" 
        [class.error]="errors['name']"
        placeholder="Digite o nome da empresa"
        [(ngModel)]="companyData.name"
        [disabled]="isSaving">
      <span *ngIf="errors['name']" class="field-error">{{ errors['name'] }}</span>
    </div>

    <div class="form-group">
      <label class="form-label">Número de Funcionários</label>
      <input 
        type="number" 
        class="form-control" 
        [class.error]="errors['employees']"
        placeholder="0"
        [(ngModel)]="companyData.employees"
        [disabled]="isSaving">
      <span *ngIf="errors['employees']" class="field-error">{{ errors['employees'] }}</span>
    </div>

    <div class="form-group">
      <label class="form-label">Data de Fundação</label>
      <input 
        type="date" 
        class="form-control"
        [(ngModel)]="companyData.foundationDate"
        [disabled]="isSaving">
    </div>

    <div class="form-group">
      <label class="form-label">Localidade da Sede</label>
      <input 
        type="text" 
        class="form-control" 
        placeholder="Cidade, Estado"
        [(ngModel)]="companyData.headquarters"
        [disabled]="isSaving">
    </div>

    <div class="form-group">
      <label class="form-label">Localidades Presentes</label>
      <textarea 
        class="form-control" 
        rows="3" 
        placeholder="Liste as localidades onde a empresa está presente (separadas por vírgula)"
        [(ngModel)]="companyData.locations"
        [disabled]="isSaving"></textarea>
      <span class="field-hint">Exemplo: São Paulo, Rio de Janeiro, Belo Horizonte</span>
    </div>

    <div class="form-group">
      <label class="form-label">Mercado de Atuação</label>
      <select 
        class="form-control" 
        [(ngModel)]="companyData.market"
        [disabled]="isSaving">
        <option value="">Selecione um setor...</option>
        <option *ngFor="let sector of marketSectors" [value]="sector">
          {{ sector }}
        </option>
      </select>
    </div>

    <div class="modal-footer">
      <button 
        class="btn btn-primary" 
        (click)="onSave()"
        [disabled]="isSaving">
        <i class="fas" [class.fa-save]="!isSaving" [class.fa-spinner]="isSaving" [class.fa-spin]="isSaving"></i>
        {{ getButtonText() }}
      </button>
      <button 
        class="btn btn-secondary" 
        (click)="closeModal()"
        [disabled]="isSaving">
        Cancelar
      </button>
    </div>
  </div>
</div>