<!-- src/app/components/notification-dropdown/notification-dropdown.html -->
<div class="notification-dropdown" *ngIf="isOpen" (click)="$event.stopPropagation()">
    <div class="notification-header">
      <h3>Notificações</h3>
      <button 
        class="clear-btn" 
        (click)="clearAll()"
        [disabled]="notifications.length === 0">
        Limpar
      </button>
    </div>
    
    <div class="notification-list" 
         (scroll)="onScroll($event)">
      <!-- Loading indicator -->
      <div class="loading-indicator" *ngIf="isLoading">
        <i class="fas fa-spinner fa-spin"></i>
        Carregando...
      </div>
      
      <!-- Empty state -->
      <div *ngIf="!isLoading && notifications.length === 0" class="empty-state">
        <i class="fas fa-bell-slash"></i>
        <p>Nenhuma notificação</p>
      </div>
      
      <!-- Notification items -->
      <div 
        *ngFor="let notification of displayedNotifications; trackBy: trackById"
        class="notification-item"
        [class.unread]="!notification.isRead"
        [class.high-priority]="notification.priority === 'high'"
        (click)="markAsRead(notification)">
        
        <div class="notification-icon" [class]="'type-' + notification.type">
          <i [class]="notification.icon"></i>
        </div>
        
        
        <div class="notification-content">
          <div class="notification-time">{{ formatTime(notification.timestamp) }}</div>
          <div class="notification-title">{{ notification.title }}</div>
          <div class="notification-message">{{ notification.message }}</div>
        </div>
      </div>
      
      <!-- Load more indicator -->
      <div class="load-more-indicator" *ngIf="hasMoreNotifications && !isLoading && displayedNotifications.length > 0">
        <i class="fas fa-arrow-down"></i>
        Role para ver mais ({{notifications.length - displayedNotifications.length}} restantes)
      </div>
      
      <!-- End of list -->
      <div class="end-of-list" *ngIf="!hasMoreNotifications && displayedNotifications.length > 3">
        <i class="fas fa-check"></i>
        Todas carregadas ({{notifications.length}} total)
      </div>
    </div>
    
    <div class="notification-footer" *ngIf="notifications.length > 0">
      <a href="#" (click)="viewAll($event)">Ver todas as notificações</a>
    </div>
  </div>