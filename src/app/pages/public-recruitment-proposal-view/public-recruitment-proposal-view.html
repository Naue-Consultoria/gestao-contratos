<!DOCTYPE html>
<div class="proposal-landing recruitment-proposal">

  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-left">
          <div class="company-branding">
            <div class="company-info">
              <img src="/logoNaueNeg.png" alt="NAUE Consultoria" class="company-logo">
            </div>
            <div class="ceo-presentation mobile-ceo">
              <div class="ceo-image-container">
                <img src="/naue.jpg" alt="Mariana Naue" class="ceo-photo" (error)="onImageError($event)">
                <div class="ceo-title">CEO & FUNDADORA</div>
              </div>
            </div>
          </div>

          <p class="company-tagline-centered">
            Especialistas em Recrutamento & Seleção<span class="mobile-break"><br></span> para o mercado imobiliário.
          </p>

          <div class="proposal-info">
            <h2 class="proposal-type">
              <span class="outline-text" data-text="Proposta">Proposta R&S</span><span class="green-dot">.</span>
            </h2>
            <div class="client-name" *ngIf="proposal">
              {{ (proposal.client.type === 'PJ' && proposal.client.company) ?
                  (proposal.client.company.trade_name || proposal.client.company.company_name) :
                  (proposal.client.type === 'PF' && proposal.client.person) ?
                  proposal.client.person.full_name : 'Cliente' }}
            </div>
          </div>
        </div>

        <div class="hero-right">
          <div class="ceo-presentation">
            <div class="ceo-image-container">
              <img src="/naue.jpg" alt="Mariana Naue" class="ceo-photo" (error)="onImageError($event)">
              <div class="ceo-title">CEO & FUNDADORA</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- About Section -->
  <section class="about-section">
    <div class="section-container">
      <div class="about-content">
        <div class="about-left">
          <div class="stats-grid">
            <div class="stat-card">
              <div class="stat-number">+15</div>
              <div class="stat-text">Anos no Mercado</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">360°</div>
              <div class="stat-text">Soluções completas</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">+100</div>
              <div class="stat-text">Empresas Atendidas</div>
            </div>
            <div class="stat-card">
              <div class="stat-number">380%</div>
              <div class="stat-text">ROI em 18 Meses</div>
            </div>
          </div>
        </div>

        <div class="about-center">
          <img src="/estados.png" alt="Mapa do Brasil - Estados" class="map-image" (error)="onImageError($event)">
        </div>

        <div class="about-right">
          <div class="presence-section">
            <h3 class="presence-title">Presença Nacional</h3>
            <div class="locations-list">
              <div class="location-item">1. Goiás-GO</div>
              <div class="location-item">2. Mato Grosso-MT</div>
              <div class="location-item">3. Paraíba-PB</div>
              <div class="location-item">4. Pernambuco-PE</div>
              <div class="location-item">5. Paraná-PR</div>
              <div class="location-item">6. Rio de Janeiro-RJ</div>
              <div class="location-item">7. Tocantins-TO</div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Team Section -->
  <section class="team-section">
    <div class="section-container">
      <div class="team-content">
        <div class="team-header">
          <h2 class="team-title">
            <span class="no-wrap">Nosso Time de <span class="highlight-text">Especialistas</span></span>
          </h2>
          <p class="team-subtitle">
            Profissionais altamente qualificados em Recrutamento & Seleção para o mercado imobiliário
          </p>
        </div>
      </div>
    </div>

    <div class="team-grid-container">
      <div *ngIf="teamLoading" class="team-loading">
        <div class="loading-spinner"></div>
        <p>Carregando nossa equipe de especialistas...</p>
      </div>

      <div class="team-carousel-container" *ngIf="!teamLoading && teamMembers.length > 0">
        <div class="team-carousel"
             (mouseenter)="pauseTeamCarousel()"
             (mouseleave)="resumeTeamCarousel()"
             (mousedown)="startTeamDrag($event)"
             (mousemove)="onTeamDrag($event)"
             (mouseup)="endTeamDrag()"
             (mouseleave)="endTeamDrag()"
             (touchstart)="startTeamTouch($event)"
             (touchmove)="onTeamTouchMove($event)"
             (touchend)="endTeamTouch()">

          <div class="team-carousel-track"
               [class.is-dragging]="isTeamDragging"
               [style.transform]="currentTeamTransform">
            <div *ngFor="let member of duplicatedTeamMembers; trackBy: trackByMemberId"
                 class="specialist-card">

              <div class="specialist-photo-section">
                <div class="photo-frame">
                  <img *ngIf="getTeamMemberPhotoUrl(member) && getTeamMemberPhotoUrl(member) !== ''"
                       [src]="getTeamMemberPhotoUrl(member)"
                       [alt]="member.name"
                       class="specialist-photo"
                       (error)="onImageError($event)"
                       style="display: block;"
                       draggable="false">
                  <div *ngIf="!getTeamMemberPhotoUrl(member) || getTeamMemberPhotoUrl(member) === ''"
                       class="photo-placeholder"
                       style="display: flex !important;">
                    <div class="initials-avatar">
                      {{ getTeamMemberInitials(member.name) }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="specialist-info">
                <h3 class="specialist-name">{{ member.name }}</h3>
                <p class="specialist-position" *ngIf="member.cargo">{{ member.cargo }}</p>
                <p class="specialist-position" *ngIf="!member.cargo && member.is_fixed">CEO & Fundadora</p>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div *ngIf="!teamLoading && teamMembers.length === 0" class="team-empty-state">
        <div class="empty-illustration">
          <div class="empty-icon">
            <i class="fas fa-user-friends"></i>
          </div>
          <div class="empty-dots">
            <span></span><span></span><span></span>
          </div>
        </div>
        <h3>Equipe de Especialistas</h3>
        <p>Nossa equipe altamente qualificada está sendo preparada para apresentação.</p>
      </div>
    </div>
  </section>

  <!-- Clients Partners Section -->
  <section class="partners-section">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Nossos Clientes <span class="highlight-text">Parceiros</span></h2>
        <p class="section-subtitle">Empresas que confiam na Naue Consultoria</p>
      </div>

      <div class="partners-showcase">
        <div class="partners-carousel"
             (mouseenter)="pauseCarousel()"
             (mouseleave)="resumeCarousel()"
             (mousedown)="startDrag($event)"
             (mousemove)="onDrag($event)"
             (mouseup)="endDrag()"
             (mouseleave)="endDrag()"
             (touchstart)="startTouch($event)"
             (touchmove)="onTouchMove($event)"
             (touchend)="endTouch()">

          <div class="carousel-track"
               [class.is-dragging]="isDragging"
               [style.transform]="currentTransform">
            <div *ngFor="let client of clients; let i = index" class="partner-logo">
              <img [src]="client.logo"
                   [alt]="client.name"
                   (error)="onClientLogoError($event)"
                   draggable="false"
                   width="120"
                   height="80"
                   loading="lazy">
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Timeline Section - Atração e Seleção -->
  <section class="timeline-section" *ngIf="!isLoading && proposal">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">
          <span class="no-wrap">Atração e <span class="highlight-text">Seleção</span></span>
        </h2>
        <p class="section-subtitle">
          Processo completo de recrutamento do início ao fim
        </p>
      </div>

      <div class="timeline-container">
        <!-- Timeline Line -->
        <div class="timeline-line"></div>

        <!-- Timeline Items -->
        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-top">
            <p>Abertura da vaga pelo cliente com as informações do perfil desejado</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-bottom">
            <p>Divulgação/triagem</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-top">
            <p>Prospecção dos melhores perfis e entrevistas realizadas pela consultoria</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-bottom">
            <p>Entrevistas realizadas pela empresa (RH, gestor) sendo apresentado um quadro de <strong>3 perfis iniciais</strong>.</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-top">
            <p>Testes comportamentais ou psicológicos a depender da vaga</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-bottom">
            <p>Proposta para o candidato</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-top">
            <p>Início do candidato na empresa</p>
          </div>
        </div>

        <div class="timeline-item">
          <div class="timeline-dot"></div>
          <div class="timeline-content timeline-bottom">
            <p>Acompanhamento do início ao fim da vaga, dando orientações e consultoria estratégica caso haja necessidade.</p>
          </div>
        </div>

        <div class="timeline-item timeline-final">
          <div class="timeline-dot timeline-dot-final"></div>
          <div class="timeline-content timeline-top">
            <p><strong>Vaga fechada com sucesso!</strong></p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h3>Carregando sua proposta personalizada...</h3>
      <p>Aguarde enquanto preparamos os detalhes do seu projeto</p>
    </div>
  </div>

  <!-- Main Proposal Content -->
  <div *ngIf="!isLoading && proposal" class="proposal-content">

    <!-- Unified Proposal Section - Simplificado para R&S -->
    <section class="proposal-unified-section recruitment-section">
      <div class="section-container">

        <div class="proposal-intro-compact">
          <h1 class="proposal-title">Sua Solução de <span class="highlight-text">Recrutamento</span></h1>
          <p class="proposal-subtitle">
            O investimento certo, na medida das necessidades da sua empresa.
          </p>
        </div>

        <!-- Investment Percentages Section -->
        <div *ngIf="hasRecruitmentPercentages()">

          <div class="investment-grid">
            <!-- Administrativas e Gestão -->
            <div class="investment-card">
              <div class="card-header admin-header">
                <h4>VAGAS ADMINISTRATIVAS E GESTÃO</h4>
              </div>
              <div class="card-body">
                <div class="percentage-display">
                  <i class="fas fa-check"></i>
                  <span>{{ getRecruitmentPercentage('administrativo_gestao') }}% do valor do salário</span>
                </div>
              </div>
            </div>

            <!-- Comerciais -->
            <div class="investment-card">
              <div class="card-header commercial-header">
                <h4>VAGAS COMERCIAIS</h4>
              </div>
              <div class="card-body">
                <div class="percentage-display">
                  <i class="fas fa-check"></i>
                  <span>{{ getRecruitmentPercentage('comercial') }}% do valor do salário</span>
                </div>
                <div class="card-note">(média do salário com comissão)</div>
              </div>
            </div>

            <!-- Operacionais -->
            <div class="investment-card">
              <div class="card-header operational-header">
                <h4>VAGAS OPERACIONAIS</h4>
              </div>
              <div class="card-body">
                <div class="percentage-display">
                  <i class="fas fa-check"></i>
                  <span>{{ getRecruitmentPercentage('operacional') }}% do valor do salário</span>
                </div>
              </div>
            </div>

            <!-- Estágio/Jovem Aprendiz -->
            <div class="investment-card">
              <div class="card-header intern-header">
                <h4>VAGAS DE ESTÁGIO/JOVEM APRENDIZ</h4>
              </div>
              <div class="card-body">
                <div class="percentage-display">
                  <i class="fas fa-check"></i>
                  <span>{{ getRecruitmentPercentage('estagio_jovem') }}% do valor da bolsa</span>
                </div>
              </div>
            </div>
          </div>

          <div class="investment-disclaimer">
            *Não é incluso ajuda de custo e benefícios
          </div>
        </div>
      </div>
    </section>

    <!-- Agreements Section -->
    <section class="agreements-section-wrapper">
      <div class="section-container">
        <div class="agreements-section">
          <!-- Acordos e Garantias -->
          <div class="agreement-block agreement-left">
            <h3 class="agreement-title">
              <i class="fas fa-shield-alt"></i>
              ACORDOS E GARANTIAS:
            </h3>
            <ul class="agreement-list">
              <li>
                <i class="fas fa-check"></i>
                <span>Caso o candidato selecionado não tenha <em>match</em> com a cultura da empresa ou não atenda as expectativas para do cargo, <strong>a contratante tem como garantia uma reposição</strong> dentro do prazo de até <strong>45 dias para vagas operacionais e 60 dias</strong> para vagas administrativas/comerciais, após a data de início;</span>
              </li>
              <li>
                <i class="fas fa-check"></i>
                <span><strong>Todas as vagas contam com aplicação de testes psicológicos ou não</strong>, de acordo com cada nível;</span>
              </li>
              <li>
                <i class="fas fa-check"></i>
                <span>Caso a empresa cancele a vaga após 5 dias de abertura, <strong>será cobrado 30% do valor da remuneração</strong> citada no formulário de Solicitação de Vaga;</span>
              </li>
              <li>
                <i class="fas fa-check"></i>
                <span>Caso a empresa faça abertura e queira em seguida deixar em <em>stand by</em> o processo, <strong>o mesmo só poderá ficar pausado por 20 dias corridos</strong>. A partir deste prazo será faturado o valor do cancelamento automaticamente.</span>
              </li>
              <li>
                <i class="fas fa-check"></i>
                <span><strong>A Naue Consultoria realiza a checagem simples de antecedentes jurídicos</strong>, sendo de responsabilidade da contratante a pesquisa profunda ou detalhada caso tenha necessidade.</span>
              </li>
            </ul>
          </div>

          <!-- Acordos de Pagamento -->
          <div class="agreement-block agreement-right">
            <h3 class="agreement-title">
              <i class="fas fa-file-invoice-dollar"></i>
              ACORDOS DE PAGAMENTO:
            </h3>
            <ul class="agreement-list">
              <li>
                <i class="fas fa-check"></i>
                <span>O faturamento da vaga ocorre na data de fechamento da mesma, podendo ocorrer o pagamento via pix ou boleto em até 10 dias;</span>
              </li>
              <li>
                <i class="fas fa-check"></i>
                <span>Se o candidato desistir ou for demitido dentro do prazo de reposição o faturamento e pagamento se mantém, pois a substituição será realizada com prioridade pelo nosso time.</span>
              </li>
            </ul>
          </div>
        </div>
      </div>
    </section>

    <!-- Next Steps Section -->
    <section class="next-steps-section-wrapper">
      <div class="section-container">
        <div class="next-steps-section">
          <div class="next-steps-content">
            <div class="next-steps-left">
              <h2 class="next-steps-title">PRÓXIMOS<br>PASSOS</h2>
            </div>
            <div class="next-steps-right">
              <p class="next-steps-intro">Estamos prontos para iniciar o projeto imediatamente.</p>
              <p class="next-steps-subtitle">Após aprovação:</p>
              <ul class="next-steps-list">
                <li>
                  <i class="fas fa-check"></i>
                  <span>Envio da minuta contratual.</span>
                </li>
                <li>
                  <i class="fas fa-check"></i>
                  <span>Agendamento das reuniões de alinhamento.</span>
                </li>
                <li>
                  <i class="fas fa-check"></i>
                  <span>Planejamento detalhado do cronograma de trabalho.</span>
                </li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Digital Signature Section -->
    <section class="signature-section" *ngIf="proposal.status === 'sent' && !proposalExpired">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Aceite Sua <span class="highlight-text">Proposta</span></h2>
          <p class="section-subtitle">Preencha os dados abaixo e assine digitalmente para confirmar a contratação do serviço de Recrutamento & Seleção.</p>
        </div>

        <div class="signature-form-container">
          <form [formGroup]="signatureForm" class="signature-form">

            <!-- Personal Information -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-user"></i>
                Informações do Responsável
              </h3>
              <div class="form-grid">
                <div class="form-field">
                  <label for="client_name" class="field-label">Nome Completo *</label>
                  <input
                    type="text"
                    id="client_name"
                    formControlName="client_name"
                    class="field-input"
                    placeholder="Digite seu nome completo"
                    [class.error]="isFieldInvalid(signatureForm, 'client_name')">
                  <div class="field-error" *ngIf="isFieldInvalid(signatureForm, 'client_name')">
                    <i class="fas fa-exclamation-circle"></i>
                    Nome completo é obrigatório
                  </div>
                </div>

                <div class="form-field">
                  <label for="client_email" class="field-label">Email *</label>
                  <input
                    type="email"
                    id="client_email"
                    formControlName="client_email"
                    class="field-input"
                    placeholder="seu@email.com"
                    [class.error]="isFieldInvalid(signatureForm, 'client_email')">
                  <div class="field-error" *ngIf="isFieldInvalid(signatureForm, 'client_email')">
                    <i class="fas fa-exclamation-circle"></i>
                    Email válido é obrigatório
                  </div>
                </div>

                <div class="form-field">
                  <label for="client_phone" class="field-label">Telefone</label>
                  <input
                    type="tel"
                    id="client_phone"
                    formControlName="client_phone"
                    class="field-input"
                    placeholder="(11) 99999-9999"
                    maxlength="15"
                    (input)="onPhoneInput($event)"
                    (keypress)="onPhoneKeyPress($event)">
                </div>

                <div class="form-field">
                  <label for="client_document" class="field-label">CPF/CNPJ</label>
                  <input
                    type="text"
                    id="client_document"
                    formControlName="client_document"
                    class="field-input"
                    placeholder="000.000.000-00 ou 00.000.000/0000-00"
                    maxlength="18"
                    (input)="onDocumentInput($event)"
                    (keypress)="onDocumentKeyPress($event)">
                </div>
              </div>
            </div>

            <!-- Payment Method -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-credit-card"></i>
                Forma de Pagamento
              </h3>

              <div class="payment-method-selection">
                <label class="field-label">Escolha o método de pagamento *</label>
                <div class="payment-methods">
                  <label class="payment-method-option"
                         *ngFor="let method of paymentMethods">
                    <input type="radio"
                           name="payment_method"
                           [value]="method.value"
                           [checked]="paymentMethod === method.value"
                           (change)="onPaymentMethodChange(method.value)">
                    <span class="method-label">
                      <i [class]="method.icon"></i>
                      {{ method.label }}
                    </span>
                  </label>
                </div>
              </div>
              <div class="payment-info-box">
                <p>O pagamento é realizado à vista após a aprovação e contratação do candidato selecionado.</p>
              </div>
            </div>

            <!-- Digital Signature -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-signature"></i>
                Assinatura Digital *
              </h3>
              <div class="signature-area">
                <div class="signature-instructions">
                  <p>Desenhe sua assinatura no campo abaixo usando o mouse ou toque na tela</p>
                </div>

                <div class="signature-canvas-wrapper">
                  <canvas
                    #signatureCanvas
                    class="signature-canvas"
                    (mousedown)="startDrawing($event)"
                    (mousemove)="draw($event)"
                    (mouseup)="stopDrawing()"
                    (mouseleave)="stopDrawing()"
                    (touchstart)="startTouchDrawing($event)"
                    (touchmove)="touchDraw($event)"
                    (touchend)="stopTouchDrawing($event)">
                  </canvas>
                  <div class="signature-placeholder" *ngIf="!signatureDrawn">
                    <i class="fas fa-pen"></i>
                    <span>Clique aqui para assinar</span>
                  </div>
                </div>

                <div class="signature-actions">
                  <button type="button" class="btn-secondary" (click)="clearSignature()">
                    <i class="fas fa-eraser"></i>
                    Limpar
                  </button>
                  <div class="signature-status" *ngIf="signatureDrawn">
                    <i class="fas fa-check-circle"></i>
                    <span>Assinatura capturada</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Additional Comments -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-comments"></i>
                Observações Adicionais
              </h3>
              <div class="form-field full-width">
                <label for="client_observations" class="field-label">Comentários ou dúvidas (opcional)</label>
                <textarea
                  id="client_observations"
                  formControlName="client_observations"
                  class="field-textarea"
                  placeholder="Adicione qualquer observação, dúvida ou requisitos específicos sobre o processo..."
                  rows="4">
                </textarea>
              </div>
            </div>

            <!-- Submit Button -->
            <div class="form-submit-section">
              <button
                type="button"
                class="btn-submit-signature"
                [disabled]="!canSignProposal() || isSubmitting"
                (click)="signProposal()">
                <i *ngIf="!isSubmitting" class="fas fa-signature"></i>
                <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin"></i>
                <span *ngIf="!isSubmitting">Aceitar e Assinar Proposta</span>
                <span *ngIf="isSubmitting">Processando assinatura...</span>
              </button>

              <div class="requirements-hint" *ngIf="!canSignProposal()">
                <p>Complete todos os campos obrigatórios e adicione sua assinatura digital para prosseguir</p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>
  </div>

  <!-- Success Modal -->
  <div class="modal-backdrop" *ngIf="showSuccessModal" (click)="closeSuccessModal()">
    <div class="modal-container" (click)="$event.stopPropagation()">
      <div class="modal-content success-modal">
        <div class="success-icon-wrapper">
          <div class="success-icon">
            <i class="fas fa-check"></i>
          </div>
        </div>
        <h2 class="modal-title">Proposta Aceita!</h2>
        <p class="modal-message">A proposta de R&S foi aceita com sucesso!</p>
        <p class="modal-submessage">Em breve iniciaremos o processo de recrutamento e entraremos em contato.</p>
        <button class="btn-modal-close" (click)="closeSuccessModal()">
          Fechar
        </button>
      </div>
    </div>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo">
            <img src="/logoNaueNeg.png" alt="NAUE Consultoria" class="footer-logo-img">
          </div>
          <p>Transformando o mercado imobiliário brasileiro com excelência e inovação</p>
        </div>

        <div class="footer-contact">
          <h4>Contato</h4>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>mariana&#64;naueconsultoria.com.br</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>(62) 99411-8289</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>Flamboyant Park Business<br>
            Jardim Goiás, Goiânia - GO</span>
          </div>

          <div class="social-media">
            <h5>Siga-nos</h5>
            <div class="social-links">
              <a href="https://instagram.com/naueconsultoria.rh" target="_blank" rel="noopener noreferrer" class="social-link instagram">
                <i class="fab fa-instagram"></i>
              </a>
              <a href="https://linkedin.com/company/naue-consultoria" target="_blank" rel="noopener noreferrer" class="social-link linkedin">
                <i class="fab fa-linkedin-in"></i>
              </a>
            </div>
          </div>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; {{ currentYear }} NAUE Consultoria. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

</div>
