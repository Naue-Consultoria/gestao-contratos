<app-header 
  [userName]="userName"
  [userRole]="userRole"
  [userInitials]="userInitials"
  [isDarkMode]="isDarkMode"
  [notifications]="notifications"
  [unreadNotificationsCount]="unreadNotificationsCount"
  [isNotificationOpen]="isNotificationOpen"
  (toggleMobileSidebar)="toggleMobileSidebar()"
  (toggleTheme)="toggleTheme()"
  (toggleNotifications)="toggleNotifications()"
  (clearNotifications)="clearNotifications()"
  (performSearch)="globalSearchTerm = $event; performSearch()"
  (logout)="logout()">
</app-header>

<!-- Dropdown de Notificações -->
<div class="notification-dropdown-wrapper" *ngIf="isNotificationOpen">
  <app-notification-dropdown
    [isOpen]="isNotificationOpen"
    (close)="isNotificationOpen = false"
    (viewAllClick)="isNotificationOpen = false">
  </app-notification-dropdown>
</div>

<!-- Sidebar -->
<app-sidebar
  [navSections]="navSections"
  [isSidebarCollapsed]="isSidebarCollapsed"
  [isMobileSidebarOpen]="isMobileSidebarOpen"
  (navigateTo)="navigateTo($event)"
  (sidebarToggled)="toggleSidebar()">
</app-sidebar>

<!-- Main Content -->
<main class="main-content" [class.sidebar-collapsed]="isSidebarCollapsed">
  <router-outlet></router-outlet>
</main>

<!-- Modals -->
<app-contract-modal
  [isOpen]="isContractModalOpen"
  [servicesList]="servicesList"
  [selectedServices]="selectedServices"
  (close)="closeContractModal()"
  (save)="saveContract()">
</app-contract-modal>

<!-- User Modal -->
<app-user-modal
  [isOpen]="isUserModalOpen"
  [editingUser]="editingUser"
  (close)="closeUserModal()"
  (save)="saveUser()">
</app-user-modal>