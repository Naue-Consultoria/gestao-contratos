<app-header 
  [userName]="userName"
  [userRole]="userRole"
  [userInitials]="userInitials"
  [userId]="userId"
  [hasProfilePicture]="userHasProfilePicture"
  [notifications]="notifications"
  [unreadNotificationsCount]="unreadNotificationsCount"
  [isNotificationOpen]="isNotificationOpen"
  (toggleMobileSidebar)="toggleMobileSidebar()"
  (toggleNotifications)="toggleNotifications()"
  (clearNotifications)="clearNotifications()"
  (logout)="logout()">
</app-header>

<div class="notification-dropdown-wrapper" *ngIf="isNotificationOpen">
  <app-notification-dropdown
    [isOpen]="isNotificationOpen"
    (close)="isNotificationOpen = false"
    (viewAllClick)="isNotificationOpen = false">
  </app-notification-dropdown>
</div>

<!-- Mobile Sidebar Overlay -->
<div class="sidebar-overlay" 
     [class.visible]="isMobileSidebarOpen" 
     (click)="closeMobileSidebar()">
</div>

<app-sidebar
  [isCollapsed]="isSidebarCollapsed" 
  [isMobileSidebarOpen]="isMobileSidebarOpen"
  (sidebarToggled)="toggleSidebar()">
</app-sidebar>

<main class="main-content" [class.sidebar-collapsed]="isSidebarCollapsed">
  <router-outlet></router-outlet>
</main>

<app-contract-modal
  [isOpen]="isContractModalOpen"
  [servicesList]="servicesList"
  [selectedServices]="selectedServices"
  (close)="closeContractModal()"
  (save)="saveContract()">
</app-contract-modal>

<app-user-modal
  [isOpen]="isUserModalOpen"
  [editingUser]="editingUser"
  (close)="closeUserModal()"
  (save)="saveUser()">
</app-user-modal>