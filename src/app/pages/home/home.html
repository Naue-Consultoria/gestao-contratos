<app-header 
  [userName]="userName"
  [userRole]="userRole"
  [userInitials]="userInitials"
  [isDarkMode]="isDarkMode"
  [notifications]="notifications"
  [unreadNotificationsCount]="unreadNotificationsCount"
  [isNotificationOpen]="isNotificationOpen"
  (toggleSidebar)="toggleSidebar()"
  (toggleMobileSidebar)="toggleMobileSidebar()"
  (toggleTheme)="toggleTheme()"
  (toggleNotifications)="toggleNotifications()"
  (clearNotifications)="clearNotifications()"
  (performSearch)="globalSearchTerm = $event; performSearch()"
  (logout)="logout()">
</app-header>

<!-- Sidebar -->
<app-sidebar
  [navSections]="navSections"
  [isSidebarCollapsed]="isSidebarCollapsed"
  [isMobileSidebarOpen]="isMobileSidebarOpen"
  (navigateTo)="navigateTo($event)">
</app-sidebar>

<!-- Main Content -->
<main class="main-content">
  <!-- IMPORTANTE: Apenas o router-outlet, sem os componentes individuais -->
  <router-outlet></router-outlet>
</main>

<!-- Modals -->
<app-contract-modal
  [isOpen]="isContractModalOpen"
  [servicesList]="servicesList"
  [selectedServices]="selectedServices"
  (close)="closeContractModal()"
  (save)="saveContract()">
</app-contract-modal>

<app-company-modal
  [isOpen]="isCompanyModalOpen"
  (close)="closeCompanyModal()"
  (save)="saveCompany()">
</app-company-modal>

<!-- User Modal com editingUser -->
<app-user-modal
  [isOpen]="isUserModalOpen"
  [editingUser]="editingUser"
  (close)="closeUserModal()"
  (save)="saveUser()">
</app-user-modal>

<!-- Success Notification -->
<div class="notification-toast" [class.show]="showNotification" [class.success]="isNotificationSuccess" [class.error]="!isNotificationSuccess">
  <i [class]="isNotificationSuccess ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'"></i>
  <div>
    <div class="notification-toast-title">{{ isNotificationSuccess ? 'Sucesso!' : 'Erro!' }}</div>
    <div class="notification-toast-message">{{ notificationMessage }}</div>
  </div>
</div>