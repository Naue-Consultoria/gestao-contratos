<!DOCTYPE html>
<div class="proposal-landing">
  
  <!-- Hero Section -->
  <section class="hero-section">
    <div class="hero-container">
      <div class="hero-content">
        <div class="hero-left">
          <div class="company-branding">
            <div class="logo-container">
              <img src="/logoNaue.png" alt="NAUE Consultoria" class="company-logo">
            </div>
            <div class="company-info">
              <h1 class="company-name">NAUE Consultoria</h1>
              <p class="company-tagline">Especialistas em Mercado Imobiliário</p>
            </div>
          </div>
          
          <p class="hero-description">
            Com metodologia própria e comprovada, transformamos mais de 1.500 líderes e centenas de 
            construtoras, incorporadoras, loteadoras e imobiliárias em referências de mercado.
          </p>
          
          <!-- Company Stats -->
          <div class="company-stats">
            <div class="stat-item">
              <div class="stat-number">+15</div>
              <div class="stat-text">Anos no Mercado</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">+1500</div>
              <div class="stat-text">Líderes Transformados</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">+100</div>
              <div class="stat-text">Empresas Atendidas</div>
            </div>
            <div class="stat-item">
              <div class="stat-number">380%</div>
              <div class="stat-text">ROI em 18 Meses</div>
            </div>
          </div>
        </div>
        
        <div class="hero-right">
          <div class="ceo-presentation">
            <div class="ceo-image-container">
              <img src="/naue.jpg" alt="Mariana Naue" class="ceo-photo" (error)="onImageError($event)">
              <div class="ceo-title">CEO & FUNDADORA</div>
            </div>
            <div class="ceo-quote">
              <div class="quote-mark">
                <i class="fas fa-quote-left"></i>
              </div>
              <p class="quote-text">
                "Mariana Naue criou a primeira consultoria especializada em mercado imobiliário do Brasil"
              </p>
              <div class="quote-author">
                <strong>Mariana Naue</strong>
                <span>CEO & Fundadora</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Why Choose NAUE Section -->
  <section class="benefits-section">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Por que escolher a NAUE?</h2>
        <p class="section-subtitle">Somos pioneiros e referência em consultoria imobiliária no Brasil</p>
      </div>
      
      <div class="benefits-grid">
        <div class="benefit-item">
          <div class="benefit-icon">
            <i class="fas fa-trophy"></i>
          </div>
          <h3 class="benefit-title">Pioneirismo</h3>
          <p class="benefit-description">
            Primeira consultoria especializada em mercado imobiliário do Brasil, com metodologia própria e comprovada.
          </p>
        </div>
        
        <div class="benefit-item featured">
          <div class="benefit-icon">
            <i class="fas fa-chart-line"></i>
          </div>
          <h3 class="benefit-title">Resultados Comprovados</h3>
          <p class="benefit-description">
            Mais lucro em negócios gerados para nossos clientes ao longo de 15 anos de atuação.
          </p>
        </div>
        
        <div class="benefit-item">
          <div class="benefit-icon">
            <i class="fas fa-users"></i>
          </div>
          <h3 class="benefit-title">Equipe Especializada</h3>
          <p class="benefit-description">
            Time de consultores com profundo conhecimento do mercado imobiliário e formação técnica específica.
          </p>
        </div>
        
        <div class="benefit-item">
          <div class="benefit-icon">
            <i class="fas fa-lightbulb"></i>
          </div>
          <h3 class="benefit-title">Soluções Personalizadas</h3>
          <p class="benefit-description">
            Cada projeto é único. Desenvolvemos estratégias sob medida para as necessidades específicas de cada cliente.
          </p>
        </div>
        
        <div class="benefit-item">
          <div class="benefit-icon">
            <i class="fas fa-handshake"></i>
          </div>
          <h3 class="benefit-title">Parceria de Sucesso</h3>
          <p class="benefit-description">
            Acompanhamos nossos clientes em toda a jornada, garantindo resultados sustentáveis e duradouros.
          </p>
        </div>
        
        <div class="benefit-item">
          <div class="benefit-icon">
            <i class="fas fa-shield-alt"></i>
          </div>
          <h3 class="benefit-title">Garantia de Qualidade</h3>
          <p class="benefit-description">
            Nossos processos são auditados e certificados, garantindo a máxima qualidade em todas as entregas.
          </p>
        </div>
      </div>
    </div>
  </section>

  <!-- Clients Partners Section -->
  <section class="partners-section">
    <div class="section-container">
      <div class="section-header">
        <h2 class="section-title">Nossos Clientes Parceiros</h2>
        <p class="section-subtitle">Empresas que confiam na NAUE Consultoria</p>
      </div>
      
      <div class="partners-showcase">
        <div class="partners-carousel">
          <div class="carousel-track" [style.transform]="'translateX(' + carouselTransform + ')'">
            <div class="partner-logo" *ngFor="let client of clients">
              <div class="logo-placeholder">
                <span class="logo-text">NAUE</span>
                <span class="logo-subtext">Consultoria</span>
              </div>
            </div>
          </div>
        </div>
        
        <div class="testimonials-container">
          <div class="testimonial-item">
            <div class="testimonial-content">
              <i class="fas fa-quote-left testimonial-quote-icon"></i>
              <p class="testimonial-text">
                "A NAUE foi fundamental para o sucesso do nosso empreendimento. Sua análise precisa nos permitiu tomar decisões assertivas."
              </p>
              <div class="testimonial-author">
                <strong>João Silva</strong>
                <span>CEO, Construtora ABC</span>
              </div>
            </div>
          </div>
          
          <div class="testimonial-item">
            <div class="testimonial-content">
              <i class="fas fa-quote-left testimonial-quote-icon"></i>
              <p class="testimonial-text">
                "Profissionalismo e conhecimento técnico excepcionais. Recomendo a NAUE para qualquer projeto no mercado imobiliário."
              </p>
              <div class="testimonial-author">
                <strong>Maria Santos</strong>
                <span>Diretora, Incorporadora XYZ</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-overlay">
    <div class="loading-content">
      <div class="loading-spinner"></div>
      <h3>Carregando sua proposta personalizada...</h3>
      <p>Aguarde enquanto preparamos os detalhes do seu projeto</p>
    </div>
  </div>

  <!-- Main Proposal Content -->
  <div *ngIf="!isLoading && proposal" class="proposal-content">
    
    <!-- Unified Proposal Section -->
    <section class="proposal-unified-section">
      <div class="section-container">

        <div class="proposal-intro-compact">
          <h1 class="proposal-title">Sua Proposta Sob Medida</h1>
          <p class="proposal-subtitle">
            Preparamos especialmente para você uma seleção de serviços personalizados para o sucesso do seu projeto imobiliário.
            Selecione os serviços que melhor atendem às suas necessidades.
          </p>
          <div class="proposal-status-bar">
            <div class="status-indicator" [ngClass]="'status-' + proposal.status">
              <span class="status-dot"></span>
              <span class="status-text">{{ getStatusText(proposal.status) }}</span>
            </div>
          </div>
        </div>
        
        <div class="services-table-wrapper">
          <div class="table-controls">
            <div class="bulk-selection">
              <input 
                type="checkbox" 
                id="select-all-services"
                [checked]="areAllServicesSelected()"
                [indeterminate]="areSomeServicesSelected()"
                (change)="toggleAllServices($event)">
              <label for="select-all-services">Selecionar todos os serviços</label>
            </div>
            <div class="services-counter">
              {{ getSelectedServicesCount() }} de {{ proposal.services.length }} serviços selecionados
            </div>
          </div>
          
          <div class="services-table-container">
            <table class="services-table">
              <thead>
                <tr>
                  <th class="col-select">Seleção</th>
                  <th class="col-service">Serviço</th>
                  <th class="col-category">Categoria</th>
                  <th class="col-duration">Duração</th>
                  <th class="col-value">Valor</th>
                </tr>
              </thead>
              <tbody>
                <tr 
                  *ngFor="let service of proposal.services; let i = index"
                  class="service-row"
                  [class.selected]="isServiceSelected(service.service_id)"
                  [class.unselected]="!isServiceSelected(service.service_id)">
                  
                  <td class="col-select">
                    <div class="checkbox-wrapper">
                      <input 
                        type="checkbox" 
                        [id]="'service-' + service.service_id"
                        [checked]="isServiceSelected(service.service_id)"
                        (change)="toggleService(service.service_id)">
                      <label [for]="'service-' + service.service_id" class="checkbox-label">
                        <span class="checkmark"></span>
                      </label>
                    </div>
                  </td>
                  
                  <td class="col-service">
                    <div class="service-details">
                      <h4 class="service-name">{{ service.service.name }}</h4>
                      <p class="service-description" *ngIf="service.service.description">
                        {{ service.service.description }}
                      </p>
                      <div class="service-meta" *ngIf="service.quantity > 1">
                        <span class="quantity-badge">{{ service.quantity }}x unidades</span>
                      </div>
                    </div>
                  </td>
                  
                  <td class="col-category">
                    <div class="category-tag">
                      <i class="fas fa-tag"></i>
                      <span>{{ service.service.category }}</span>
                    </div>
                  </td>
                  
                  <td class="col-duration">
                    <div class="duration-info" *ngIf="service.service.duration_unit && (service.service.duration_amount || service.service.duration_unit === 'Projeto')">
                      <i class="fas fa-clock"></i>
                      <span *ngIf="service.service.duration_unit === 'Projeto'">{{ service.service.duration_unit }}</span>
                      <span *ngIf="service.service.duration_unit !== 'Projeto'">{{ service.service.duration_amount }} {{ service.service.duration_unit }}</span>
                    </div>
                    <div class="duration-info not-specified" *ngIf="!service.service.duration_unit || (!service.service.duration_amount && service.service.duration_unit !== 'Projeto')">
                      <i class="fas fa-minus"></i>
                      <span>A definir</span>
                    </div>
                  </td>
                  
                  <td class="col-value">
                    <div class="value-display">
                      <div class="total-value">{{ formatCurrency(getServiceTotal(service)) }}</div>
                      <div class="unit-value" *ngIf="service.quantity > 1">
                        {{ formatCurrency(getServiceValue(service)) }} cada
                      </div>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          
          <div class="services-summary">
            <div class="summary-card">
              <div class="summary-info">
                <div class="selected-count">
                  <i class="fas fa-check-circle"></i>
                  <span>{{ getSelectedServicesCount() }} serviços selecionados</span>
                </div>
              </div>
              <div class="summary-total">
                <div class="total-label">Valor Total</div>
                <div class="total-amount">{{ formatCurrency(getSelectedTotal()) }}</div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>

    <!-- Digital Signature Section -->
    <section class="signature-section" *ngIf="proposal.status === 'sent' && !proposalExpired">
      <div class="section-container">
        <div class="section-header">
          <h2 class="section-title">Assinatura Digital</h2>
          <p class="section-subtitle">Complete seus dados e assine digitalmente para aceitar a proposta</p>
        </div>
        
        <div class="signature-form-container">
          <form [formGroup]="signatureForm" class="signature-form">
            
            <!-- Personal Information -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-user"></i>
                Informações Pessoais
              </h3>
              <div class="form-grid">
                <div class="form-field">
                  <label for="client_name" class="field-label">Nome Completo *</label>
                  <input 
                    type="text" 
                    id="client_name" 
                    formControlName="client_name"
                    class="field-input"
                    placeholder="Digite seu nome completo"
                    [class.error]="isFieldInvalid(signatureForm, 'client_name')">
                  <div class="field-error" *ngIf="isFieldInvalid(signatureForm, 'client_name')">
                    <i class="fas fa-exclamation-circle"></i>
                    Nome completo é obrigatório
                  </div>
                </div>

                <div class="form-field">
                  <label for="client_email" class="field-label">Email *</label>
                  <input 
                    type="email" 
                    id="client_email" 
                    formControlName="client_email"
                    class="field-input"
                    placeholder="seu@email.com"
                    [class.error]="isFieldInvalid(signatureForm, 'client_email')">
                  <div class="field-error" *ngIf="isFieldInvalid(signatureForm, 'client_email')">
                    <i class="fas fa-exclamation-circle"></i>
                    Email válido é obrigatório
                  </div>
                </div>

                <div class="form-field">
                  <label for="client_phone" class="field-label">Telefone</label>
                  <input 
                    type="tel" 
                    id="client_phone" 
                    formControlName="client_phone"
                    class="field-input"
                    placeholder="(11) 99999-9999">
                </div>

                <div class="form-field">
                  <label for="client_document" class="field-label">CPF/CNPJ</label>
                  <input 
                    type="text" 
                    id="client_document" 
                    formControlName="client_document"
                    class="field-input"
                    placeholder="000.000.000-00">
                </div>
              </div>
            </div>

            <!-- Digital Signature -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-signature"></i>
                Assinatura Digital *
              </h3>
              <div class="signature-area">
                <div class="signature-instructions">
                  <p>Desenhe sua assinatura no campo abaixo usando o mouse ou toque na tela</p>
                </div>
                
                <div class="signature-canvas-wrapper">
                  <canvas 
                    #signatureCanvas
                    class="signature-canvas"
                    width="600"
                    height="200"
                    (mousedown)="startDrawing($event)"
                    (mousemove)="draw($event)"
                    (mouseup)="stopDrawing()"
                    (mouseleave)="stopDrawing()"
                    (touchstart)="startTouchDrawing($event)"
                    (touchmove)="touchDraw($event)"
                    (touchend)="stopTouchDrawing($event)">
                  </canvas>
                  <div class="signature-placeholder" *ngIf="!signatureDrawn">
                    <i class="fas fa-pen"></i>
                    <span>Clique aqui para assinar</span>
                  </div>
                </div>
                
                <div class="signature-actions">
                  <button type="button" class="btn-secondary" (click)="clearSignature()">
                    <i class="fas fa-eraser"></i>
                    Limpar
                  </button>
                  <div class="signature-status" *ngIf="signatureDrawn">
                    <i class="fas fa-check-circle"></i>
                    <span>Assinatura capturada</span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Additional Comments -->
            <div class="form-section">
              <h3 class="form-section-title">
                <i class="fas fa-comments"></i>
                Observações Adicionais
              </h3>
              <div class="form-field full-width">
                <label for="client_observations" class="field-label">Comentários ou dúvidas (opcional)</label>
                <textarea 
                  id="client_observations" 
                  formControlName="client_observations"
                  class="field-textarea"
                  placeholder="Adicione qualquer observação, dúvida ou solicitação especial sobre o projeto..."
                  rows="4">
                </textarea>
              </div>
            </div>
            
            <!-- Submit Button -->
            <div class="form-submit-section">
              <button 
                type="button"
                class="btn-submit-signature" 
                [disabled]="!canSignProposal() || isSubmitting"
                (click)="signProposal()">
                <i *ngIf="!isSubmitting" class="fas fa-signature"></i>
                <i *ngIf="isSubmitting" class="fas fa-spinner fa-spin"></i>
                <span *ngIf="!isSubmitting">Aceitar e Assinar Proposta</span>
                <span *ngIf="isSubmitting">Processando assinatura...</span>
              </button>
              
              <div class="requirements-hint" *ngIf="!canSignProposal()">
                <p>Complete todos os campos obrigatórios e adicione sua assinatura digital para prosseguir</p>
              </div>
            </div>
          </form>
        </div>
      </div>
    </section>
  </div>

  <!-- Footer -->
  <footer class="site-footer">
    <div class="footer-container">
      <div class="footer-content">
        <div class="footer-brand">
          <div class="footer-logo">
            <img src="/logoNaue.png" alt="NAUE Consultoria" class="footer-logo-img">
          </div>
          <h4>NAUE Consultoria</h4>
          <p>Transformando o mercado imobiliário brasileiro com excelência e inovação</p>
        </div>
        
        <div class="footer-contact">
          <h4>Contato</h4>
          <div class="contact-item">
            <i class="fas fa-envelope"></i>
            <span>contato&#64;naueconsultoria.com</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-phone"></i>
            <span>(11) 99999-9999</span>
          </div>
          <div class="contact-item">
            <i class="fas fa-map-marker-alt"></i>
            <span>São Paulo, SP</span>
          </div>
        </div>
        
      </div>
      
      <div class="footer-bottom">
        <p>&copy; {{ currentYear }} NAUE Consultoria. Todos os direitos reservados.</p>
      </div>
    </div>
  </footer>

</div>